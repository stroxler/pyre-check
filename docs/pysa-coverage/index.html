<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8CK1L365DB"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-8CK1L365DB",{})</script>
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Coverage Increasing Strategies | Pyre</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" name="twitter:image" content="https://pyre-check.org/img/docusaurus.png"><meta data-react-helmet="true" property="og:url" content="https://pyre-check.org/docs/pysa-coverage"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Coverage Increasing Strategies | Pyre"><meta data-react-helmet="true" name="description" content="Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running pyre analyze."><meta data-react-helmet="true" property="og:description" content="Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running pyre analyze."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://pyre-check.org/docs/pysa-coverage"><link data-react-helmet="true" rel="alternate" href="https://pyre-check.org/docs/pysa-coverage" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pyre-check.org/docs/pysa-coverage" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.9178da2e.css">
<link rel="preload" href="/assets/js/runtime~main.155cf83b.js" as="script">
<link rel="preload" href="/assets/js/main.4ace9c95.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/integrated_logo_light.png" alt="Pyre Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/getting-started">Type Checking (Pyre)</a></li><li><a class="dropdown__link" href="/docs/pysa-basics">Static Analysis (Pysa)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/pysa-quickstart">Quickstart</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How Pysa Works</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/pysa-running">Running Pysa</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/pysa-shipping-rules-models">Shipping Pysa Models and Rules</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Scaling Beyond Individual Models</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Development Tips</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-false-negatives">Debugging False Negatives</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/pysa-coverage">Coverage Increasing Strategies</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pysa-tips">General Tips</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/static-analysis-post-processor">Static Analysis Processor</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Warning Codes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/pysa-additional-resources">Additional Resources</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/pysa-explore">Exploring Taint Models Interactively</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><header><h1 class="docTitle_1y8q">Coverage Increasing Strategies</h1></header><div class="markdown"><p>Pysa relies on good type information and compete models in order to accurately analyze code. This page describes a number of strategies for increasing typing and model coverage to help Pysa. These strategies can be used once, with the results committed to your repository, or run as an ephemeral step in your analysis process prior to running <code>pyre analyze</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="pyre-infer"></a><code>pyre infer</code><a class="hash-link" href="#pyre-infer" title="Direct link to heading">#</a></h2><p>Pyre comes with a built-in type inference feature. From the root of your project, run <code>pyre infer -r -i</code> to make recursive in-place edits to add type information.</p><p>Note: There is currently a bug with using the above arguments with the infer feature. The workaround is to break it into two commands:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pyre infer</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pyre infer -i --annotate-from-existing-stubs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="preprocessors"></a>Preprocessors<a class="hash-link" href="#preprocessors" title="Direct link to heading">#</a></h2><p>Pysa comes with a number of preprocessors intended to dynamically generate models for a project. Read <a href="/docs/pysa-model-generators">this page</a> to learn about the preprocessors that are currently available, and how to write your own. For best results, every entry point to your application (eg. view function for a Django web server) should have a hand written or preprocessor-generated model.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="quick-and-dirty-scripts"></a>Quick and Dirty Scripts<a class="hash-link" href="#quick-and-dirty-scripts" title="Direct link to heading">#</a></h2><p>Sometimes, code has conventions that convey typing/model information that just needs to be translated to a form Pysa understands. Don&#x27;t be afraid of quick and dirty scripts to encode that information in a meaningful way.</p><p>For example, do all your Django view functions live in a file called <code>views.py</code> and have an untyped <code>request</code> argument as the first argument? Can you just do a quick <code>grep</code> + <code>sed</code> to add the <code>HttpRequest</code> type annotation to all of those parameters? Pysa has a ton of pre-written models for <code>HttpRequest</code>, so a small typing change like that can cover a ton of entry points.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="hand-crafted-models"></a>Hand Crafted Models<a class="hash-link" href="#hand-crafted-models" title="Direct link to heading">#</a></h2><p>Consider all the ways that your application takes user input, and check to see if Pysa already has models written or not. For example, if you&#x27;re using Flask as your web server rather than Django, you&#x27;ll find Pysa doesn&#x27;t currently have any pre-written models for Flask. You&#x27;ll need to write some models following the instructions in the <a href="/docs/pysa-basics">previous pages of our docs</a>. If the models are generally useful to others, please consider putting up a pull request to contribute them back to Pysa.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div></div><br><div class="row"><div class="col"><a href="https://github.com/facebook/pyre-check/tree/main/documentation/website/docs/pysa_increasing_coverage.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pysa-false-negatives"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Debugging False Negatives</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/pysa-tips"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">General Tips »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pyre-infer" class="table-of-contents__link"><code>pyre infer</code></a></li><li><a href="#preprocessors" class="table-of-contents__link">Preprocessors</a></li><li><a href="#quick-and-dirty-scripts" class="table-of-contents__link">Quick and Dirty Scripts</a></li><li><a href="#hand-crafted-models" class="table-of-contents__link">Hand Crafted Models</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="https://docusaurus.io/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="https://docusaurus.io/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright &#169; 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.155cf83b.js"></script>
<script src="/assets/js/main.4ace9c95.js"></script>
</body>
</html>